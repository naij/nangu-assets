define("app/exts",["magix","pat","jquery","app/models/manager","app/filters"],function(t){var e=t("magix"),a=t("pat"),n=t("jquery"),i=t("app/models/manager"),r=t("app/filters"),o=e.Router;e.View.merge({ctor:function(){this.$locker={},this.on("rendercall",function(){this.$locker={}})},param:function(t){return o.parse().params[t]||""},to:function(){return o.to.apply(o,arguments)},request:function(t){var e=this,a=new i;return e.capture(t||a.id,a,!0)},setView:function(t,i){var o,d=this,p=n.Deferred(),u=n("#"+d.id),f=u[0],c=d.data;return d.rendered?(c.__inject__||(n.extend(d.__pat.$data,d.data),d.data=d.__pat.$data),d.__pat.$apply(),i&&i(),p.resolve()):(d.beginUpdate(d.id),f&&(o={el:u[0],data:c,template:d.tmpl,dataCheckType:"dirtyCheck"},d.filters=d.filters||{},o.filters=n.extend(r,d.filters),d.__pat=new a(o),d.__pat.on("beforeDeleteBlock",function(t){n.each(t,function(t,e){1===e.nodeType&&d.owner.unmountZone&&d.owner.unmountZone(e)})}),d.__pat.on("beforeUpdateAttribute",function(t){for(var a,n=0;n<t.length;n++)if(a=t[n],a.hasAttribute("mx-view")){var i=e.Vframe.get(a.id);i&&i.unmountView()}}),d.__pat.on("afterUpdateAttribute",function(t,a){if(/(mx-|data-)/.test(a))for(var n,i=0;i<t.length;i++)if(n=t[i],n.hasAttribute("mx-view")){var r=e.Vframe.get(n.id);r&&r.mountView(n.getAttribute("mx-view"))}}),d.__pat.on("afterAddBlock",function(t){n.each(t,function(t,e){1===e.nodeType&&(e.getAttribute("mx-vframe")?(e.id||(e.id="mx_n_"+(new Date).getTime()),d.owner.mountVframe(e.id,e.getAttribute("mx-view"))):d.owner.mountZone(e.id))})}),d.data=d.__pat.$data),d.endUpdate(d.id),t&&t.call(d),p.resolve(),d.on("destroy",function(){d.__pat&&d.__pat.$destroy()}),d.rendered=!0),p.promise()},animateLoading:function(){var t=n(".block-switch-loading");t.css({opacity:1,width:0}),t.stop().animate({width:"100%"},200,"linear",function(){setTimeout(function(){t.stop().animate({opacity:0},250)},250)})}})});