define("app/plugins/serializejson",["jquery"],function(e){var n=e("jquery");n.fn.serializeJSON=function(e){var r,t,a,i,s,u,l,o,p,c,d;return r=n.serializeJSON,t=this,a=r.setupOpts(e),i=t.serializeArray(),r.readCheckboxUncheckedValues(i,a,t),s={},n.each(i,function(e,n){u=n.name,l=n.value,o=r.extractTypeAndNameWithNoType(u),p=o.nameWithNoType,c=o.type,c||(c=r.tryToFindTypeFromDataAttr(u,t)),r.validateType(u,c,a),"skip"!==c&&(d=r.splitInputNameIntoKeysArray(p),l=r.parseValue(l,u,c,a),r.deepSet(s,d,l,a))}),s},n.serializeJSON={defaultOptions:{checkboxUncheckedValue:void 0,parseNumbers:!1,parseBooleans:!1,parseNulls:!1,parseAll:!1,parseWithFunction:null,customTypes:{},defaultTypes:{string:function(e){return String(e)},number:function(e){return Number(e)},"boolean":function(e){var n=["false","null","undefined","","0"];return-1===n.indexOf(e)},"null":function(e){var n=["false","null","undefined","","0"];return-1===n.indexOf(e)?e:null},array:function(e){return JSON.parse(e)},object:function(e){return JSON.parse(e)},auto:function(e){return n.serializeJSON.parseValue(e,null,null,{parseNumbers:!0,parseBooleans:!0,parseNulls:!0})},skip:null},useIntKeysAsArrayIndex:!1},setupOpts:function(e){var r,t,a,i,s,u;u=n.serializeJSON,null==e&&(e={}),a=u.defaultOptions||{},t=["checkboxUncheckedValue","parseNumbers","parseBooleans","parseNulls","parseAll","parseWithFunction","customTypes","defaultTypes","useIntKeysAsArrayIndex"];for(r in e)if(-1===t.indexOf(r))throw new Error("serializeJSON ERROR: invalid option '"+r+"'. Please use one of "+t.join(", "));return i=function(n){return e[n]!==!1&&""!==e[n]&&(e[n]||a[n])},s=i("parseAll"),{checkboxUncheckedValue:i("checkboxUncheckedValue"),parseNumbers:s||i("parseNumbers"),parseBooleans:s||i("parseBooleans"),parseNulls:s||i("parseNulls"),parseWithFunction:i("parseWithFunction"),typeFunctions:n.extend({},i("defaultTypes"),i("customTypes")),useIntKeysAsArrayIndex:i("useIntKeysAsArrayIndex")}},parseValue:function(e,r,t,a){var i,s;return i=n.serializeJSON,s=e,a.typeFunctions&&t&&a.typeFunctions[t]?s=a.typeFunctions[t](e):a.parseNumbers&&i.isNumeric(e)?s=Number(e):!a.parseBooleans||"true"!==e&&"false"!==e?a.parseNulls&&"null"==e&&(s=null):s="true"===e,a.parseWithFunction&&!t&&(s=a.parseWithFunction(s,r)),s},isObject:function(e){return e===Object(e)},isUndefined:function(e){return void 0===e},isValidArrayIndex:function(e){return/^[0-9]+$/.test(String(e))},isNumeric:function(e){return e-parseFloat(e)>=0},optionKeys:function(e){if(Object.keys)return Object.keys(e);var n,r=[];for(n in e)r.push(n);return r},readCheckboxUncheckedValues:function(e,r,t){var a,i,s,u,l;null==r&&(r={}),l=n.serializeJSON,a="input[type=checkbox][name]:not(:checked):not([disabled])",i=t.find(a).add(t.filter(a)),i.each(function(t,a){s=n(a),u=s.attr("data-unchecked-value"),u?e.push({name:a.name,value:u}):l.isUndefined(r.checkboxUncheckedValue)||e.push({name:a.name,value:r.checkboxUncheckedValue})})},extractTypeAndNameWithNoType:function(e){var n;return(n=e.match(/(.*):([^:]+)$/))?{nameWithNoType:n[1],type:n[2]}:{nameWithNoType:e,type:null}},tryToFindTypeFromDataAttr:function(e,n){var r,t,a,i;return r=e.replace(/(\[|\])/g,"\\$1"),t='[name="'+r+'"]',a=n.find(t).add(n.filter(t)),i=a.attr("data-value-type"),i||null},validateType:function(e,r,t){var a,i;if(i=n.serializeJSON,a=i.optionKeys(t?t.typeFunctions:i.defaultOptions.defaultTypes),r&&-1===a.indexOf(r))throw new Error("serializeJSON ERROR: Invalid type "+r+" found in input name '"+e+"', please use one of "+a.join(", "));return!0},splitInputNameIntoKeysArray:function(e){var r,t;return t=n.serializeJSON,r=e.split("["),r=n.map(r,function(e){return e.replace(/\]/g,"")}),""===r[0]&&r.shift(),r},deepSet:function(e,r,t,a){var i,s,u,l,o,p;if(null==a&&(a={}),p=n.serializeJSON,p.isUndefined(e))throw new Error("ArgumentError: param 'o' expected to be an object or array, found undefined");if(!r||0===r.length)throw new Error("ArgumentError: param 'keys' expected to be an array with least one element");i=r[0],1===r.length?""===i?e.push(t):e[i]=t:(s=r[1],""===i&&(l=e.length-1,o=e[l],i=p.isObject(o)&&(p.isUndefined(o[s])||r.length>2)?l:l+1),""===s?(p.isUndefined(e[i])||!n.isArray(e[i]))&&(e[i]=[]):a.useIntKeysAsArrayIndex&&p.isValidArrayIndex(s)?(p.isUndefined(e[i])||!n.isArray(e[i]))&&(e[i]=[]):(p.isUndefined(e[i])||!p.isObject(e[i]))&&(e[i]={}),u=r.slice(1),p.deepSet(e[i],u,t,a))}}});