define("app/views/pages/setting/admin/create",["magix","jquery","app/mixins/dialog"],function(e,a,i){var l=e("magix"),t=e("jquery"),s=e("app/mixins/dialog");i.exports=l.View.extend({tmpl:'<div class="page-header clearfix"><div class="title-bar"><h2 class="title" t-if="id">\u7f16\u8f91\u6210\u5458</h2><h2 class="title" t-if="!id">\u65b0\u589e\u6210\u5458</h2></div></div><div class="page-body"><form id="admin-create-form"><ul class="union-form"><li class="field"><p class="field-label2">\u7528\u6237\u540d</p><input type="text" class="input" name="username" value="{{username}}"></li><li class="field"><p class="field-label2">\u89d2\u8272</p><select class="select" name="role">{{#for(item in roleList)}}<option value="{{item.id}},{{item.name}}" selected="{{item.selected}}">{{item.name}}</option>{{/for}}</select></li><li class="field"><p class="field-label2">\u72b6\u6001</p><label class="mr10" mx-click="switchStatus({value:1})"><input name="status" class="mr10" checked="{{status==1}}" type="radio" value="1"/><span>\u6b63\u5e38</span></label><label mx-click="switchStatus({value:2})"><input name="status" class="mr10" checked="{{status==2}}" type="radio" value="2"/><span>\u7981\u7528</span></label></li><li class="field"><a href="#" class="btn btn-brand btn-large" mx-click="submit()">\u63d0\u4ea4</a></li></ul></form></div>',mixins:[s],render:function(){var e=this,a=e.param("id");a?e.request().all([{name:"admin_detail",params:{id:a}},{name:"role_list"}],function(i,l,s){var n=l.get("data"),d=s.get("data"),r=d.list;0!==a&&t.each(r,function(e,a){a.selected=!1,a.id==n.roleId&&(a.selected=!0)}),e.data=t.extend(n,{roleList:r}),e.setView()}):e.request().all([{name:"role_list"}],function(a,i){var l=i.get("data"),t=l.list;e.data={status:1,roleList:t},e.setView()})},"submit<click>":function(e){e.preventDefault();var a=this,i=a.data.id,l=t("#admin-create-form").serializeJSON({useIntKeysAsArrayIndex:!0}),s=l.role.split(",");l.roleId=s[0],l.roleName=s[1];var n;i?(l.id=i,n="admin_update"):n="admin_create",a.request().all([{name:n,params:l}],function(e){e&&e.msg?a.alert(e.msg):window.history.go(-1)})}})});