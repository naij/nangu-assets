define("app/views/pages/common/business_picker",["magix","jquery","app/mixins/dialog"],function(a,e,i){var t=a("magix"),s=a("jquery"),n=a("app/mixins/dialog");i.exports=t.View.extend({tmpl:'<div class="business-picker"><div class="dialog-hd"><h2 class="dialog-title">\u9009\u62e9\u5546\u6237</h2></div><div class="dialog-bd"><div class="search"><input type="text" class="input" placeholder="\u8bf7\u8f93\u5165\u5546\u6237\u540d\u641c\u7d22" mx-keydown="search()"></div><ul class="business-container clearfix">{{#for(item in list)}}<li t-class:selected="item.selected" mx-click="pick({id:{{item.id}}})"><div class="name">{{item.name}}</div><div class="mask"><span class="iconfont iconduigou"></span></div></li>{{/for}}</ul><div class="pager-container" mx-view="app/coms/pagination/pagination?total={{totalCount}}&size={{pageSize}}&page={{pageNo}}" mx-change="pageChange()"></div></div><div class="dialog-ft"><a href="javascript:;" class="btn btn-brand btn-large mr10" mx-click="submit()" t-if="selectedItem">\u786e\u5b9a</a><a href="javascript:;" class="btn btn-disabled btn-large mr10" t-if="!selectedItem">\u786e\u5b9a</a><a href="javascript:;" class="btn btn-normal btn-large" mx-click="cancel()">\u53d6\u6d88</a></div></div>',mixins:[n],init:function(a){this.extraData=a},render:function(){var a=this,e=a.pageNo||1,i=18,t=a.q||"";a.request().all([{name:"business_list",params:{pageNo:e,pageSize:i,q:t}}],function(t,s){var n=s.get("data");a.data={list:n.list,pageNo:e,pageSize:i,totalCount:n.totalCount},a.setView()})},"pick<click>":function(a){var e,i=this,t=a.params.id,n=i.data.list;s.each(n,function(a,i){i.selected=!1,i.id==t&&(i.selected=!0,e=i)}),i.data={list:n,selectedItem:e},i.setView()},"search<keydown>":function(a){"13"==a.keyCode&&(this.q=s(a.eventTarget).val(),this.pageNo=1,this.render())},"pageChange<change>":function(a){this.pageNo=a.state.page,this.render()},"submit<click>":function(a){a.preventDefault(),this.extraData.dialog.close(),this.extraData.callback(this.data.selectedItem)},"cancel<click>":function(a){a.preventDefault(),this.extraData.dialog.close()}})});