define("app/views/pages/content/ad/create",["magix","jquery","app/mixins/dialog"],function(i,a,e){var l=i("magix"),s=i("jquery"),t=i("app/mixins/dialog");e.exports=l.View.extend({tmpl:'<div class="page-header clearfix"><div class="title-bar"><h2 class="title" t-if="id">\u7f16\u8f91</h2><h2 class="title" t-if="!id">\u65b0\u589e</h2></div></div><div class="page-body ad-create"><form id="ad-create-form"><input type="hidden" name="position" value="{{position}}"><ul class="union-form"><li class="field"><p class="field-label2">\u56fe\u7247</p><div class="cover clearfix">{{^if(imageUrl)}}<div class="img-placeholder" mx-click="pickImage()"><span class="iconfont iconhao"></span><div>\u9009\u62e9\u56fe\u7247</div></div>{{/if}} {{#if(imageUrl)}}<div class="img-container"><div class="mask" mx-click="pickImage()">\u91cd\u65b0\u9009\u62e9\u56fe\u7247</div><img src="{{imageUrl}}" class="img"> <input type="hidden" name="imageUrl" value="{{imageUrl}}"></div>{{/if}}</div></li><li class="field"><p class="field-label2">\u94fe\u63a5\u7c7b\u578b</p><label class="mr10" mx-click="switchUrlType({value:0})"><input name="urlType" class="mr10" checked="{{urlType==0}}" type="radio" value="0"/><span>\u8df3\u8f6c\u7f51\u9875</span></label><label mx-click="switchUrlType({value:1})"><input name="urlType" class="mr10" checked="{{urlType==1}}" type="radio" value="1"/><span>\u8df3\u8f6c\u5c0f\u7a0b\u5e8f</span></label><div class="content-picker-container"><div t-if="urlType==0"><p class="field-label2">\u7f51\u9875\u5730\u5740</p><input type="input" class="input" name="url" value="{{url}}"></div><div t-if="urlType==1"><p class="field-label2">\u5c0f\u7a0b\u5e8f\u9875\u9762\u5730\u5740</p><input type="input" class="input" name="url" value="{{url}}"></div></div></li><li class="field"><p class="field-label2">\u6392\u5e8f</p><input type="number" class="input" name="sort" value="{{sort}}"></li><li class="field"><a href="#" class="btn btn-brand btn-large" mx-click="submit()">\u63d0\u4ea4</a></li></ul></form></div>',mixins:[t],render:function(){var i=this,a=i.param("id"),e=i.param("position");a?i.request().all([{name:"ad_detail",params:{id:a}}],function(a,e){var l=e.get("data");i.data=l,i.setView()}):(i.data={urlType:0,position:e},i.setView())},"pickImage<click>":function(i){i.preventDefault();var a=this;a.mxDialog("app/views/pages/common/img_picker",{width:700,limit:1,callback:function(i){a.data.imageUrl=i[0].picPath,a.setView()}})},"switchUrlType<click>":function(i){this.data.urlType=i.params.value,this.setView()},"submit<click>":function(i){i.preventDefault();var a,e=this,l=e.data.id,t=e.param("position"),c=s("#ad-create-form").serializeJSON({useIntKeysAsArrayIndex:!0});l?(c.id=l,a="ad_update"):a="ad_create",e.request().all([{name:a,params:c}],function(){e.to("/content/ad/list?position="+t)})}})});