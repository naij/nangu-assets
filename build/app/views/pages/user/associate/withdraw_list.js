define("app/views/pages/user/associate/withdraw_list",["magix","jquery","app/mixins/dialog"],function(a,t,s){var e=a("magix"),i=a("jquery"),l=a("app/mixins/dialog");s.exports=e.View.extend({tmpl:'<div class="page-header clearfix"><div class="title-bar"><h2 class="title">\u63d0\u73b0\u5217\u8868</h2></div></div><div class="page-body withdraw-list"><div class="filter"><form class="union-form" id="filter-form"><div class="col"><div class="field"><span class="label">\u63d0\u73b0\u7f16\u53f7\uff1a</span><input type="text" class="input" name="partnerTradeNo" value="{{partnerTradeNo}}"></div><div class="field"><span class="label">\u63a8\u5e7f\u8005id\uff1a</span><input type="text" class="input" name="associateId" value="{{associateId}}"></div><div class="field"><span class="label">\u5546\u6237\u540d\u79f0\uff1a</span><input type="text" class="input" name="businessName" value="{{businessName}}"></div><div class="field"><button class="btn btn-brand" mx-click="search()">\u641c\u7d22\u8ba2\u5355</button></div></div><div class="col"></div></form></div><div class="table-container"><div class="tabbar"><ul class="clearfix"><li t-class:active="status==\'\'" mx-click="status({status:\'\'})">\u5168\u90e8\u8bb0\u5f55</li><li t-class:active="status==1" mx-click="status({status:1})">\u7533\u8bf7\u4e2d</li><li t-class:active="status==2" mx-click="status({status:2})">\u5df2\u6253\u6b3e</li><li t-class:active="status==3" mx-click="status({status:3})">\u5df2\u9a73\u56de</li></ul></div><table class="table"><thead><tr t-class:no-data="list.length == 0"><th class="left" width="120">\u63d0\u73b0\u7f16\u53f7</th><th class="left" width="100">\u63a8\u5e7f\u8005id</th><th class="left" width="80">\u63d0\u73b0\u4eba\u6635\u79f0</th><th class="left" width="100">\u662f\u5426\u5546\u6237</th><th class="left" width="100">\u63d0\u73b0\u91d1\u989d</th><th class="left" width="100">\u72b6\u6001</th><th class="left" width="100">\u521b\u5efa\u65f6\u95f4</th><th class="center" width="150">\u64cd\u4f5c</th></tr></thead><tbody>{{#for(item in list)}}<tr><td class="left"><a href="/user/associate/withdraw_detail?partnerTradeNo={{item.partnerTradeNo}}" class="color-blue">{{item.partnerTradeNo}}</a></td><td class="left">{{item.associateId}}</td><td class="left">{{item.memberNickname}}</td><td class="left">{{item.businessName ? item.businessName : \'\u666e\u901a\u7528\u6237\'}}</td><td class="left"><strong>{{{item.amount|toMoneySymbol}}}</strong></td><td class="left">{{{item.status|formatStatus}}}</td><td class="left">{{item.createdAt}}</td><td class="center"><block t-if="item.status == 1"><a href="#" class="color-blue mr10" mx-click="transfers({partnerTradeNo:\'{{item.partnerTradeNo}}\'})">\u6253\u6b3e</a><a href="#" class="color-blue" mx-click="reject({partnerTradeNo:\'{{item.partnerTradeNo}}\'})">\u9a73\u56de</a></block><block t-if="item.status != 1"><span class="color-m mr10">\u6253\u6b3e</span><span class="color-m">\u9a73\u56de</span></block></td></tr>{{/for}} {{#if(list.length == 0)}}<tr class="none"><td class="center" colspan="8">\u6682\u65e0\u6570\u636e</td></tr>{{/if}}</tbody></table><div class="tfoot"><div class="pager-container" mx-view="app/coms/pagination/pagination?total={{totalCount}}&size={{pageSize}}&page={{pageNo}}" mx-change="pageChange()"></div></div></div></div>',mixins:[l],ctor:function(){this.observe(["pageNo","partnerTradeNo","associateId","businessName","status"])},render:function(){var a=this,t=a.param("pageNo")||1,s=50,e=a.param("partnerTradeNo"),i=a.param("associateId"),l=a.param("businessName"),r=a.param("status");a.request().all([{name:"associate_withdraw_list",params:{pageNo:t,pageSize:s,partnerTradeNo:e,associateId:i,businessName:l,status:r}}],function(c,n){var o=n.get("data");a.data={list:o.list,partnerTradeNo:e,associateId:i,businessName:l,status:r,pageNo:t,pageSize:s,totalCount:o.totalCount},a.setView()})},"search<click>":function(a){a.preventDefault();var t=i("#filter-form").serializeJSON();this.to(t)},"status<click>":function(a){this.to({status:a.params.status,pageNo:1})},"transfers<click>":function(a){a.preventDefault();var t=this,s=a.params.partnerTradeNo;t.confirm("\u786e\u5b9a\u8981\u6253\u6b3e\u5230\u6b64\u8d26\u6237\uff1f",function(){t.request().all([{name:"associate_transfers",params:{partnerTradeNo:s}}],function(){t.render()})})},"reject<click>":function(a){a.preventDefault();var t=this,s=a.params.partnerTradeNo;t.mxDialog("app/views/pages/user/associate/withdraw_reject",{width:700,partnerTradeNo:s,callback:function(){t.render()}})},"pageChange<change>":function(a){this.to({pageNo:a.state.page})},filters:{formatStatus:function(a){switch(a){case 1:return'<span class="color-orange">\u7533\u8bf7\u4e2d</span>';case 2:return'<span class="color-m">\u5df2\u5165\u8d26</span>';case 3:return'<span class="color-red">\u5df2\u9a73\u56de</span>'}}}})});