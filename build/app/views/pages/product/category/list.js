define("app/views/pages/product/category/list",["magix","jquery","app/mixins/dialog"],function(t,e,a){var r=t("magix"),i=(t("jquery"),t("app/mixins/dialog"));a.exports=r.View.extend({tmpl:'<div class="page-header clearfix"><div class="title-bar"><h2 class="title">\u7c7b\u76ee\u5217\u8868</h2></div></div><div class="page-body table-container"><div class="toolbar clearfix"><a href="/product/category/list" class="btn btn-brand btn-large mr10" t-if="parentId!=0">\u8fd4\u56de\u4e0a\u7ea7\u7c7b\u76ee</a><a href="/product/category/create" class="btn btn-brand btn-large">\u65b0\u589e\u7c7b\u76ee</a></div><table class="table"><thead><tr t-class:no-data="list.length == 0"><th class="left" width="150">\u7c7b\u76ee\u7f16\u53f7</th><th class="left">\u7c7b\u76ee\u540d\u79f0</th><th class="left" t-if="parentId!=0">\u7236\u7ea7\u7c7b\u76ee\u540d\u79f0</th><th class="left" width="150">\u7ea7\u522b</th><th class="center" width="200" t-if="parentId!=0">\u8bbe\u7f6e</th><th class="center" width="150">\u64cd\u4f5c</th></tr></thead><tbody>{{#for(item in list)}}<tr><td class="left">{{item.categoryId}}</td><td class="left">{{item.name}}</td><td class="left" t-if="item.level==1">{{parentName}}</td><td class="left">{{item.level|formatLevel}}</td><td class="center" t-if="item.level==1"><a href="/product/attribute/list?categoryId={{item.categoryId}}&type=0" class="color-blue mr10">\u89c4\u5219\u5217\u8868</a><a href="/product/attribute/list?categoryId={{item.categoryId}}&type=1" class="color-blue mr10">\u53c2\u6570\u5217\u8868</a><a href="/product/detailfield/list?categoryId={{item.categoryId}}" class="color-blue">\u8be6\u60c5\u5217\u8868</a></td><td class="center"><a href="/product/category/list?parentId={{item.categoryId}}&parentName={{item.name}}" class="color-blue mr10" t-if="item.level==0">\u67e5\u770b\u4e0b\u7ea7</a><a href="/product/category/create?categoryId={{item.categoryId}}&parentId={{item.parentId}}" class="color-blue mr10">\u7f16\u8f91</a></td></tr>{{/for}} {{#if(list.length == 0)}}<tr class="none"><td class="center" colspan="{{parentId!=0 ? 6 : 4}}">\u6682\u65e0\u6570\u636e</td></tr>{{/if}}</tbody></table><div class="tfoot"><div class="pager-container" mx-view="app/coms/pagination/pagination?total={{totalCount}}&size={{pageSize}}&page={{pageNo}}" mx-change="pageChange()"></div></div></div>',mixins:[i],ctor:function(){this.observe(["pageNo","parentId"])},render:function(){var t=this,e=t.param("pageNo")||1,a=10,r=t.param("parentId"),i=t.param("parentName");t.request().all([{name:"category_list",params:{parentId:r,pageNo:e,pageSize:a}}],function(l,s){var c=s.get("data");t.data={parentId:r,parentName:i,list:c.list,pageNo:e,pageSize:a,totalCount:c.totalCount},t.setView()})},"remove<click>":function(t){t.preventDefault();var e=t.params.categoryId,a=this;a.confirm("\u786e\u5b9a\u8981\u5220\u9664\u6b64\u7c7b\u76ee\uff1f\u7c7b\u76ee\u5220\u9664\u540e\u4e0d\u53ef\u590d\u539f\uff01",function(){a.request().all([{name:"category_remove",params:{categoryId:e}}],function(){a.render()})})},"pageChange<change>":function(t){this.to({pageNo:t.state.page})},filters:{formatLevel:function(t){var e;switch(t){case 0:e="\u4e00\u7ea7\u7c7b\u76ee";break;case 1:e="\u4e8c\u7ea7\u7c7b\u76ee"}return e}}})});