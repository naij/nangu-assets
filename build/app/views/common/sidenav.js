define("app/views/common/sidenav",["magix","jquery"],function(e,i,t){var a=e("magix"),n=e("jquery"),s=a.Router;t.exports=a.View.extend({tmpl:'<h1 class="title"><a href="/">\u5357\u8c37\u5c0f\u7a0b\u5e8f\u540e\u53f0</a></h1><ul class="main-nav">{{#for(item in menuList)}}<li t-class:active="item.active" mx-click="switchMainMenu({index:{{__INDEX__}}})"><span class="iconfont {{item.icon}}"></span><span>{{item.name}}</span></li>{{/for}}</ul><ul class="sub-nav">{{#for(item in subMenuList)}}<li t-class:active="item.active"><a href="{{item.path}}"><span class="iconfont {{item.icon}}"></span>{{item.name}}</a></li>{{/for}}</ul>',ctor:function(){this.observe(null,!0)},render:function(){var e=this;e.rendered?e._rendered():e.request().all([{name:"menu_config"}],function(i,t){var a=t.get("data");e.data={menuList:a.menuList},e._rendered()})},_rendered:function(){var e,i,t=s.parse(),a=t.path,c=this,u=c.data.menuList;n.each(u,function(t,s){s.active=!1,n.each(s.subMenuList,function(t,c){c.active=!1,c.relativePath&&-1!=n.inArray(a,c.relativePath)?(c.active=!0,i=!0,e=s.subMenuList,s.active=!0):a===c.path&&(c.active=!0,i=!0,e=s.subMenuList,s.active=!0)})}),i||(e=u[0].subMenuList,e[0].active=!0),c.data={menuList:u,subMenuList:e},c.setView()},"switchMainMenu<click>":function(e){var i,t=this,a=e.params.index,s=t.data.menuList;n.each(s,function(e,i){i.active=!1,a==e&&(i.active=!0)}),n.each(s,function(e,t){a==e&&(i=t.subMenuList)}),t.data={menuList:s,subMenuList:i},t.setView()}})});